{"location":"DocHub/Руководство/Документы/SmartAnts/06 Простой запрос к данным","description":"Простой запрос к данным в SmartAnts","autor":"R.Piontik","type":"smartants","source":"(\n  /* Определяем фильтр для компонентов архитектуры */\n  $matcher := /^[a-zA-Z]*\\.[a-zA-Z]*$/i;\n  /* Генерируем структуру для диаграммы */\n  {\n    /* Формируем ноды из компонентов */\n    \"nodes\": $merge(components.$spread().(\n      /* Получаем идентификатор компонента */\n      $id := $keys()[0];\n      /* Если идентификатор компонента удовлетворяет фильтру, создаем ноду */\n      $matcher($id) ? {\n          /* Отсекаем домен верхнего уровня для исключения отображения компонентов в иерархии */\n          $split($id, \".\")[1]: {\n              \"title\": *.title,\n              /* Преобразуем entity компонентов в понятные диаграмме символы actor -> user */\n              \"symbol\": *.entity = \"actor\" ? \"user\" : *.entity\n          }\n      }\n\n    ))\n  }\n)\n"}