imports:
#  - http://localhost:8080/metamodel/root.yaml
#  - http://localhost:8080/documentation/root.yaml
  - https://dochub.info/documentation/root.yaml
#  - root.yaml

entities:
  nodes:
    title: Пример сущности декларирующей свои объекты
    schema:
      type: object
      properties:
        section1:
          type: object
          patternProperties:
            "^[0-9a-zA-Z][a-zA-Z0-9_-]*(\\.[a-zA-Z][a-zA-Z0-9_-]*)*$":
              type: object
              properties:
                title:
                  title: Название объекта
                  type: string
        section2:
          type: string
    objects: # Декларируемые объекты
      node:
        route: "/section1/"  # Размещение массива объектов от корня "entities"
        title: Нода

  examples:
    title: Пример ссылок на объекты сущности node
    schema:
      type: array
      items:
        type: object
        properties:
          node:
            title: Здесь указывается ID ноды
            $ref: "#/$rels/nodes.node"  # Ссылка на объект сущности nodes
        required:
          - node

nodes:
  section2: jkhlkkljsdfhf
  section3: jkhlkkljsdfhf
  section4: jkhlkkljsdfhf
  section1:
    test:
      title: Test node 1

interactions:
  dochub.customer:
    title: Пользователь
  dochub.customer.promotion:
    title: Продвижение
  customer.promotion.article:
    title: Статья на Хабре
    triggers:
      - Выдача в поиске
    results:
      - Переход в репозиторий
    steps:
      - from: Хабр
        to: Клиент
        value: Анализ новых статей
      - from: Клиент
        to: Хабр
        value: Чтение статьи о DocHub
      - from: Клиент
        to: Репозиторий
        value: Переход в репозиторий

  customer.deployment:
    title: Разворачивание DocHub
    triggers:
      - Первое знакомство с DocHub
    results:
      - Потенциальный клиент (лид)
    steps:
      - from: Клиент
        to: Статьи
        value: Получение информации о DocHub
        sub-interactions: dochub.user.research # Здесь ссылка на взаимодействие пользователя со статьями
      - from: Клиент
        to: Репозиторий
        value: Изучение инструкции
        sub-interactions: dochub.user.check
      - from: Клиент
        to: Репозиторий
        value: Развертывание
        sub-interactions: dochub.customer.promotion.article
      - from: Клиент
        to: DocHub
        value: Первый опыт

