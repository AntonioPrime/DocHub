# Архитектурные валидаторы (validators)

Валидаторы позволяют контролировать код архитектуры на консистеностность и достаточность. Предоставляют возможность
верифицировать ее с внешними источниками и контролировать архитектурные стандарты.

Каждый валидатор имеет свой уникальный, структурированный идентификатор. На основании идентификаторов строится
дерево, которое наглядно определяет где обнаружена проблема.

Пример описания простого валидатора:
```yaml
...
rules:
  validators:
    dochub.experts:                               # Валидатор контролирует заполнение поля expert для всех компонентов
      title: Не указаны эксперты для компонентов  # Название валидатора
      source: >                                   # Источник данных об ошибках. В данном случае JSONata запрос
        ([
          components.$spread().(                                /* Сканируем все компоненты */
              $ID := $keys()[0];                                /* Получаем идентификатор компонента */
              {                                                 /* Генерируем структуру описания ошибки */
                  "uid": "expert-component-" & $ID,             /* Уникальный идентификатор выявленной ошибки */
                  "location": "/components/" & $ID,             /* Ссылка на расположение объекта ошибки */
                  "correction": "Укажите эксперта компонента",  /* Рекомендации как исправить проблему */
                  "description": "Компоненты должены иметь сведения об эксперте. 
                      Если необходимо исключить для данного компонента эту информацию,
                      укажите идентификатор ошибки в разделе 'exceptions' с описанием причины
                  ",
                  "standard": "/docs/dochub.standards.examples.expert" /* Ссылка на стандарт */
              }
          )[$not($boolean("" & *.expert))]        /* Отбираем все компоненты где поле 'expert' пустое*/
        ])
...
```

В поле 'source' можно указать идентификатор источника данных ['dataset'](/docs/dochub.datasets). 
В целом, работа валидаторов с источниками аналогичная работе [таблиц](/docs/dochub.tables) с ними. 

Результатом работы валидатора становится массив структур описывающих обнаруженные ошибки. Например:

```JSON
[
  {
    "uid": "expert-component-dochub.front",
    "location": "/components/dochub.front",
    "correction": "Укажите эксперта компонента",
    "description": "Компоненты должены иметь сведения об эксперте. 
      Если необходимо исключить для данного компонента эту информацию,
      укажите идентификатор ошибки в разделе 'exceptions' с описанием причины",
    "cause": "dochub.standards.examples.expert"
  }
]
```

* ***uid*** - Обязательное поле. Уникальный идентификатор ошибки. Важно обеспечить его глобальную уникальность.
* ***location*** - Опциональное поле. URL с расположением объекта, где выявлена ошибка.
* ***correction*** - Опциональное поле. Краткое пояснение, как исправить ошибку.
* ***description*** - Опциональное поле. Описание причины ошибки.
* ***cause*** - Опциональное поле. Идентификатор или URL документа, на основании которого создан валидатор.

[Далее](/docs/dochub.rules.exceptions)
