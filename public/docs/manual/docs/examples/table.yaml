docs:
  dochub.table.preset: 
    type: table               # Тип документа 
    headers:                  # Заголовки таблицы
      - value: id             # Идентификатор поля для вывода в колонке
        text: Идентификатор   # Заголовок колокнки
        sortable: true        # Производить сортировку по колонке
        align: left           # Форматирование по горизонтали
        width: 20%            # Ширина колонки 
      - value: payload
        text: Значение
        sortable: true
        align: left
    data:                     # Данные для таблицы (массив)
      - id: 1                 # Поде "id" 
        payload: Значение 1   # Значение поля "id"
      - id: 2
        payload: Значение 2
  dochub.table.select: 
    type: table
    headers:
      - value: from
        text: Система 1
        sortable: true
        align: left
        width: 20%
        link: link-from       # Идентификатор поля, в котором хранится ссылка
      - value: to
        text: Система 2
        sortable: true
        align: left
        width: 20%
        link: link-to
      - value: direction
        text: Связь
        sortable: true
        align: center
        width: 5%
      - value: title
        text: Описание
        sortable: true
        align: left
      - value: contract
        text: Контракт
        sortable: true
        align: left
        link: link-contract
    data: >                   # JSONata запрос к архитектуре
      (
        $MANIFEST := $;
        $distinct([components.$spread().(
            $COMPONENT := $;
            $COMPONENT_ID := $keys()[0];
            $.*.links.{
                "from": $COMPONENT.*.title,
                "link-from": "/architect/components/" & $COMPONENT_ID,
                "to": id ? $lookup($MANIFEST.components, id).title : id,
                "link-to": "/architect/components/" & id,
                "contract": contract ? $lookup($MANIFEST.docs, contract).location : contract,
                "link-contract": "/docs/" & contract,
                "title": title,
                "direction": direction
            };
        )])^(from)
      )
  dochub.table.dataset: 
    type: table
    headers:
      - value: location
        text: Документ
        sortable: true
        align: left
        width: 100%
        link: link
    data: dochub.docs           # Идентификтор источника данных
datasets:                       # Источники данных
  dochub.docs:
    query: >                     # Выводит все документы
      ([docs.{"location": location}])     