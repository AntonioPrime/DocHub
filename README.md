# DocHub
DocHub - инструмент описания архитектуры через код (Architecture as a code). 
Код архитектуры - ансамбль файлов на языках, решающих задачу описания архитектуры.

Решаемые проблемы:

1. Управление версиями архитектуры;
2. Управление децентрализованной архитектурой в Agile-ориентированных компаниях;
3. Управление архитектурой холдинга (экосистем);
4. Создание архитектурных фасадов.


## Сборка

### Конфигурация

Определите необходимые переменные окружения. Используйте файл примера ".env-example" для этого. Переименуйте его для
продакшен окружения в ".env" для локальной разработки в ".env.local". 

### Сборка из исходников для продакшен

Проект является VueJS SPA приложением. В качестве backend пользуется GitLab. 

Для развёртывания потребуется стандартная сборка VueJS приложения средствами npm.
```
npm install
npm run build
```

В результате будут сгенерированы статические файлы в папке /dist. Их необходимо 
опубликовать используя web-сервер. Например, nginx. 

Подробнее о вариантах развертывания можно узнать [тут](https://cli.vuejs.org/ru/guide/deployment.html). 

### Сборка для разработки

Если вы собираетесь использовать режим разработки, проведите конфигурирование проекта:
* Если это необходимо, в папке /certs разместите ваши сертификаты;
* Если это необходимо, модифицируйте файл vue.config.js в соответствии в вашими потребностями;
* Убедитесь, что переменные окрежения верно определены;

После этого выполните:
```
docker-compose build
docker-compose up
```

## Конфигурирование

### Настройка GitLab

Для функционирования DocHub необходимо настроить OAuth2 service provider
в GitLab. Документацию по настройке можно найти на
[официальном сайте](https://docs.gitlab.com/ee/integration/oauth_provider.html). 

![Пример настройки GitLab](pics/gitoauth.png)

### Настройка приложения
Конфигурирование осуществляется через файл настроек src/config.json

```javascript
{
    "gitlab_server": "https://git.rabota.space", //URL gitlab,
    "root_manifest": { // Корневой манифест
        "project_id": 234, // Идентификатор проекта в gitlab
        "branch": "master" // Бранч в котором лежит актуальный корневой манифест 
    },
    "oauth" : { // Параметрый OAuth gitlab 
        "APP_ID": "5f3...2ef0",
        "CLIENT_SECRET": "1e4c4...384",
        "REQUESTED_SCOPES": "read_repository+api"
    }
}
```

# Лицензия
DocHub распространяется под лицензией
[GNU GPL v.2](http://www.gnu.org/licenses/old-licenses/gpl-2.0.html)
Open source license.
